#!/bin/sh

command -v virtualenv >/dev/null 2>&1 || { echo "I require virtualenv but it's not installed.  Aborting." >&2; exit 1; }

basepath=$(dirname $(realpath $0))
fp_path=${basepath%bin}
venv_path=${fp_path}venv/bin/

if [ ! -e $venv_path ]; then
  echo "No venv directory found, installing required modules...\n\n"
  cd $fp_path
  virtualenv venv
  ${venv_path}pip install -r requirements.txt
  echo "Installation complete, running app...\n\n"
fi


${venv_path}python3 ${fp_path}foodProcessor.py $@
